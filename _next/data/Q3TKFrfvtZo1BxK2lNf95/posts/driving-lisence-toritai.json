{"pageProps":{"postData":{"id":"driving-lisence-toritai","contentHtml":"<p>みなさんこんにちは。いまじんです。</p>\n<p>みなさんは運転免許を持っているでしょうか？</p>\n<p>私は大学一年生の頃から今年こそと思い続け、ついに大学生活最後の春休みになってしまいました。</p>\n<p>そして、きたるGWにドライブデートをすると言うモチベーションを持って先日やっと教習所に足を運びました。</p>\n<p>しかし受付に行き話を聞くと、コロナの影響(?)で非常に混んでいると言われました。\nどんなにスケジュールに空きがあるかたでも4月までに卒業することは相当頑張ってキャンセル待ちをしない限りおそらく無理でしょうと。</p>\n<p>それは困ります。</p>\n<p>4月には就職のため引っ越してしまうので週末に教習を受けに地元に帰ってくるなんてまっぴらごめんです。<br>\nそれこそモチベーションが下がってお金を無駄にしてしまう...</p>\n<p>でも今回を逃したら一生免許を取れない気がしたのでやはり申し込みました。</p>\n<p>どうにかならんものかなあと思っていたら、そこらへんを歩いていた優しそうなオジサン職員が</p>\n<blockquote>\n<p>こまめに予約サイトを開いて確認するといいよ。キャンセルする人意外と多いから。</p>\n</blockquote>\n<p>と。</p>\n<p>こういうわけで今回は教習所の予約サイトを一定の時間で繰り返し訪問し、教習の予約枠に空きがあれば通知を飛ばしてくれるシステムをつくりました。</p>\n<p><img src=\"https://i.gyazo.com/3f23e0ff2fc436c39c917085c75e809c.jpg\" alt=\"Notification Image\"></p>\n<p>具体的にはPuppeteerをLambdaにデプロイしてSlackに通知を飛ばしています。\n定期実行にはCloudWatchを使いました。\n実際のコードは教習所が特定できたりしちゃってよくなさそうなので割愛させていただきます。</p>\n<p>主なつまりポイントとしては、アクセスしようとしている要素がiframeの中にあることに気づかずなかなか時間を溶かしたことです。</p>\n<p><a href=\"https://stackoverflow.com/questions/46529201/puppeteer-how-to-fill-form-that-is-inside-an-iframe\">Puppeteer - How to fill form that is inside an iframe?</a></p>\n<p>スクレイピングは初めてでしたが凄く楽しいなと思いました。<br>\n特にデバッグ用にheadlessモードをオフにして実際にブラウザが操作されているのを見るとかなりテンションがあがりました。\n食わず嫌いを克服できたので今後はもっとスクレイピングを日々の生活に役立てたいと思います。</p>\n<p>自動車学校では意外と楽しく過ごしています。というのも今年度は一度も大学で授業が受けられず、1年ぶりのオフラインでの講義だからです。</p>\n<p>なんとしてでも3月中に卒業するぞ。</p>\n<p>いまじん</p>\n<hr>\n<p>(もちろん相手のサーバーの負荷にならないように気をつけて実装しました)</p>\n<p>参照リンク</p>\n<ul>\n<li><a href=\"https://docs.aws.amazon.com/ja_jp/AmazonCloudWatch/latest/events/RunLambdaSchedule.html\">チュートリアル: CloudWatch イベント を使用して AWS Lambda 関数をスケジュールする</a></li>\n<li><a href=\"https://qiita.com/kodai-saito/items/9051d2b30a29c7d64f7d\">AWS LambdaでPuppeteerを動かす</a></li>\n</ul>\n","title":"自動車学校に通い始めました","date":"2021-01-25","draft":false}},"__N_SSG":true}