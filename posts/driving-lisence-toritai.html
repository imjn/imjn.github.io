<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>自動車学校に通い始めました</title><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@mrimjn"/><meta property="og:url" content="https://www.nowperson.net"/><meta property="og:type" content="article"/><meta property="og:title" content="自動車学校に通い始めました"/><meta property="og:description"/><meta property="og:site_name" content="imajin blog"/><meta property="og:image"/><meta name="next-head-count" content="11"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-190573472-1"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'UA-190573472-1', {
              page_path: window.location.pathname,
            });
          </script><link rel="preload" href="/_next/static/css/ce9ee42f1b0672b3.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/ce9ee42f1b0672b3.css" crossorigin="" data-n-g=""/><link rel="preload" href="/_next/static/css/35231d03cfa6459c.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/35231d03cfa6459c.css" crossorigin="" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-66d32731bdd20e83.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-436ff486eb898866.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-bdd5fa49a74d1801.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/84-c32dfea99ac1409c.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-c998c47bee3a6cd9.js" defer="" crossorigin=""></script><script src="/_next/static/ueQH32zFcdqrzhIIMOkao/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/ueQH32zFcdqrzhIIMOkao/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="layout_container__YX1XY"><article><img/><h1 class="utils_headingXl__zlq1q">自動車学校に通い始めました</h1><div class="utils_lightText__B_gv3"><time dateTime="2021-01-25">January 25, 2021</time></div><div><p>みなさんこんにちは。いまじんです。</p>
<p>みなさんは運転免許を持っているでしょうか？</p>
<p>私は大学一年生の頃から今年こそと思い続け、ついに大学生活最後の春休みになってしまいました。</p>
<p>そして、きたるGWにドライブデートをすると言うモチベーションを持って先日やっと教習所に足を運びました。</p>
<p>しかし受付に行き話を聞くと、コロナの影響(?)で非常に混んでいると言われました。
どんなにスケジュールに空きがあるかたでも4月までに卒業することは相当頑張ってキャンセル待ちをしない限りおそらく無理でしょうと。</p>
<p>それは困ります。</p>
<p>4月には就職のため引っ越してしまうので週末に教習を受けに地元に帰ってくるなんてまっぴらごめんです。<br>
それこそモチベーションが下がってお金を無駄にしてしまう...</p>
<p>でも今回を逃したら一生免許を取れない気がしたのでやはり申し込みました。</p>
<p>どうにかならんものかなあと思っていたら、そこらへんを歩いていた優しそうなオジサン職員が</p>
<blockquote>
<p>こまめに予約サイトを開いて確認するといいよ。キャンセルする人意外と多いから。</p>
</blockquote>
<p>と。</p>
<p>こういうわけで今回は教習所の予約サイトを一定の時間で繰り返し訪問し、教習の予約枠に空きがあれば通知を飛ばしてくれるシステムをつくりました。</p>
<p><img src="https://i.gyazo.com/3f23e0ff2fc436c39c917085c75e809c.jpg" alt="Notification Image"></p>
<p>具体的にはPuppeteerをLambdaにデプロイしてSlackに通知を飛ばしています。
定期実行にはCloudWatchを使いました。
実際のコードは教習所が特定できたりしちゃってよくなさそうなので割愛させていただきます。</p>
<p>主なつまりポイントとしては、アクセスしようとしている要素がiframeの中にあることに気づかずなかなか時間を溶かしたことです。</p>
<p><a href="https://stackoverflow.com/questions/46529201/puppeteer-how-to-fill-form-that-is-inside-an-iframe">Puppeteer - How to fill form that is inside an iframe?</a></p>
<p>スクレイピングは初めてでしたが凄く楽しいなと思いました。<br>
特にデバッグ用にheadlessモードをオフにして実際にブラウザが操作されているのを見るとかなりテンションがあがりました。
食わず嫌いを克服できたので今後はもっとスクレイピングを日々の生活に役立てたいと思います。</p>
<p>自動車学校では意外と楽しく過ごしています。というのも今年度は一度も大学で授業が受けられず、1年ぶりのオフラインでの講義だからです。</p>
<p>なんとしてでも3月中に卒業するぞ。</p>
<p>いまじん</p>
<hr>
<p>(もちろん相手のサーバーの負荷にならないように気をつけて実装しました)</p>
<p>参照リンク</p>
<ul>
<li><a href="https://docs.aws.amazon.com/ja_jp/AmazonCloudWatch/latest/events/RunLambdaSchedule.html">チュートリアル: CloudWatch イベント を使用して AWS Lambda 関数をスケジュールする</a></li>
<li><a href="https://qiita.com/kodai-saito/items/9051d2b30a29c7d64f7d">AWS LambdaでPuppeteerを動かす</a></li>
</ul>
</div></article></div><footer class="layout_footer__MVE_g"><a target="_blank" href="https://x.com/mrimjn">@mrimjn</a></footer></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"postData":{"id":"driving-lisence-toritai","contentHtml":"\u003cp\u003eみなさんこんにちは。いまじんです。\u003c/p\u003e\n\u003cp\u003eみなさんは運転免許を持っているでしょうか？\u003c/p\u003e\n\u003cp\u003e私は大学一年生の頃から今年こそと思い続け、ついに大学生活最後の春休みになってしまいました。\u003c/p\u003e\n\u003cp\u003eそして、きたるGWにドライブデートをすると言うモチベーションを持って先日やっと教習所に足を運びました。\u003c/p\u003e\n\u003cp\u003eしかし受付に行き話を聞くと、コロナの影響(?)で非常に混んでいると言われました。\nどんなにスケジュールに空きがあるかたでも4月までに卒業することは相当頑張ってキャンセル待ちをしない限りおそらく無理でしょうと。\u003c/p\u003e\n\u003cp\u003eそれは困ります。\u003c/p\u003e\n\u003cp\u003e4月には就職のため引っ越してしまうので週末に教習を受けに地元に帰ってくるなんてまっぴらごめんです。\u003cbr\u003e\nそれこそモチベーションが下がってお金を無駄にしてしまう...\u003c/p\u003e\n\u003cp\u003eでも今回を逃したら一生免許を取れない気がしたのでやはり申し込みました。\u003c/p\u003e\n\u003cp\u003eどうにかならんものかなあと思っていたら、そこらへんを歩いていた優しそうなオジサン職員が\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eこまめに予約サイトを開いて確認するといいよ。キャンセルする人意外と多いから。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eと。\u003c/p\u003e\n\u003cp\u003eこういうわけで今回は教習所の予約サイトを一定の時間で繰り返し訪問し、教習の予約枠に空きがあれば通知を飛ばしてくれるシステムをつくりました。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://i.gyazo.com/3f23e0ff2fc436c39c917085c75e809c.jpg\" alt=\"Notification Image\"\u003e\u003c/p\u003e\n\u003cp\u003e具体的にはPuppeteerをLambdaにデプロイしてSlackに通知を飛ばしています。\n定期実行にはCloudWatchを使いました。\n実際のコードは教習所が特定できたりしちゃってよくなさそうなので割愛させていただきます。\u003c/p\u003e\n\u003cp\u003e主なつまりポイントとしては、アクセスしようとしている要素がiframeの中にあることに気づかずなかなか時間を溶かしたことです。\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://stackoverflow.com/questions/46529201/puppeteer-how-to-fill-form-that-is-inside-an-iframe\"\u003ePuppeteer - How to fill form that is inside an iframe?\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eスクレイピングは初めてでしたが凄く楽しいなと思いました。\u003cbr\u003e\n特にデバッグ用にheadlessモードをオフにして実際にブラウザが操作されているのを見るとかなりテンションがあがりました。\n食わず嫌いを克服できたので今後はもっとスクレイピングを日々の生活に役立てたいと思います。\u003c/p\u003e\n\u003cp\u003e自動車学校では意外と楽しく過ごしています。というのも今年度は一度も大学で授業が受けられず、1年ぶりのオフラインでの講義だからです。\u003c/p\u003e\n\u003cp\u003eなんとしてでも3月中に卒業するぞ。\u003c/p\u003e\n\u003cp\u003eいまじん\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e(もちろん相手のサーバーの負荷にならないように気をつけて実装しました)\u003c/p\u003e\n\u003cp\u003e参照リンク\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.aws.amazon.com/ja_jp/AmazonCloudWatch/latest/events/RunLambdaSchedule.html\"\u003eチュートリアル: CloudWatch イベント を使用して AWS Lambda 関数をスケジュールする\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://qiita.com/kodai-saito/items/9051d2b30a29c7d64f7d\"\u003eAWS LambdaでPuppeteerを動かす\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n","title":"自動車学校に通い始めました","date":"2021-01-25","draft":false}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"driving-lisence-toritai"},"buildId":"ueQH32zFcdqrzhIIMOkao","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>